#!/bin/bash

# OpenFOAM install directory
FOAM_INST_DIR=${HOME}/OpenFOAM

# Build ParaView
unset BUILD_PARAVIEW

# Download Only
#DOWNLOAD_ONLY=yes
unset DOWNLOAD_ONLY

# Number of processors
case `hostname` in
    ff[0-9]*)
	WM_NCOMPPROCS=1
	;;
    *)
	if [ -r /proc/cpuinfo ]
	then
	    WM_NCOMPPROCS=$(egrep "^processor" /proc/cpuinfo | wc -l)
	else
	    WM_NCOMPPROCS=1
	fi
	;;
esac	
export WM_NCOMPPROCS

# OpenFOAM version list to install
OpenFOAM_BUILD_OPTION_LIST=(
    OpenFOAM_VERSION=OpenFOAM-v1612+,COMPILER_TYPE=system,COMPILER=Icc2017_1_132,COMPILE_OPTION=Dispatch,ARCH_OPTION=64,PRECISION_OPTION=DP,LABEL_SIZE=32,MPLIB=INTELMPI2017_1_132
)

#flags=`grep "^flags\s"  /proc/cpuinfo`
#case "$flags" in
#    *avx2*)
#	OpenFOAM_BUILD_OPTION_LIST=(
#	    OpenFOAM_VERSION=OpenFOAM-v1612+,COMPILER_TYPE=system,COMPILER=Icc2017_1_132,COMPILE_OPTION=AVX2,ARCH_OPTION=64,PRECISION_OPTION=DP,LABEL_SIZE=32,MPLIB=INTELMPI2017_1_132
#	)
#	;;
#    *avx*)
#	OpenFOAM_BUILD_OPTION_LIST=(
#	    OpenFOAM_VERSION=OpenFOAM-v1612+,COMPILER_TYPE=system,COMPILER=Icc2017_1_132,COMPILE_OPTION=AVX,ARCH_OPTION=64,PRECISION_OPTION=DP,LABEL_SIZE=32,MPLIB=INTELMPI2017_1_132
#	)
#	;;
#    *sse4_2*)
#	OpenFOAM_BUILD_OPTION_LIST=(
#	    OpenFOAM_VERSION=OpenFOAM-v1612+,COMPILER_TYPE=system,COMPILER=Icc2017_1_132,COMPILE_OPTION=SSE42,ARCH_OPTION=64,PRECISION_OPTION=DP,LABEL_SIZE=32,MPLIB=INTELMPI2017_1_132
#	)
#	;;
#esac	
